var smileyReverseMap={},smileyMap={};smileyMapnam=dropdownsmiliesname.concat(dropdownsmiliesnamemore);smileyMapdes=dropdownsmiliesdes.concat(dropdownsmiliesdesmore);smileyMapurl=dropdownsmiliesurl.concat(dropdownsmiliesurlmore);for(var i in smileyMapdes)smileyReverseMap[smileyMapdes[i]]=smileyMapnam[i],smileyMap[smileyMapnam[i]]=smileyMapdes[i];
MyBBEditor={insertText:function(b,e,a,d,f){var c="",k=Object.keys(CKEDITOR.instances)[0],g=b,h=e;e||(e=h="");a||(a=k+"_2");c=a.slice(0,-2);d||(d="source");f||(f="");"source"==d?rinsourceditor.insert_text(b,e,a):(g="qreply"==d?"wysiwyg"==CKEDITOR.instances[c].mode?CKEDITOR.instances[c].dataProcessor.toDataFormat(CKEDITOR.instances[c].dataProcessor.toHtml(CKEDITOR.BBCodeToHtml(g,c)),{context:"body"}):CKEDITOR.instances[c].dataProcessor.toDataFormat(g):CKEDITOR.instances[c].dataProcessor.toDataFormat(CKEDITOR.instances[c].dataProcessor.toHtml(g+
h),{context:"body"}),rinsourceditor.insert_text(g,"",a));if("undefined"!==typeof CKEDITOR&&CKEDITOR.instances&&(c||(c=k),"wysiwyg"==CKEDITOR.instances[c].mode)){a="";if(parseInt(seltext))try{a=CKEDITOR.instances[c].getSelectedHtml().getHtml()}catch(l){}"source"!=d&&"qreply"!=d||""!=a?CKEDITOR.instances[c].insertHtml(b+a+e):(data=CKEDITOR.BBCodeToHtml(g+h,c),"quote"==f&&(data=data.replace(/([\s\S]*)<\/blockquote>/,"$1\x3c/blockquote\x3e\x3cbr\x3e")),CKEDITOR.instances[c].insertHtml(data))}return!1}};
bbfontstyle=function(b,e){MyBBEditor.insertText(b,e)};insert_text=function(b,e){e&&(b=" "+b+" ");MyBBEditor.insertText(b)};
rinsourceditor=function(){return{init:function(){return!0},insert_text:function(b,e,a){var d;a=document.getElementById(a);if(!a)return!1;if(document.selection&&document.selection.createRange)a.focus(),d=document.selection.createRange(),d.text=b+d.text+e;else if(a.selectionStart||0===a.selectionStart){d=a.selectionStart;var f=a.selectionEnd,c=a.scrollTop;a.value=a.value.substring(0,d)+b+a.value.substring(d,f)+e+a.value.substring(f,a.value.length);"\x3d"===b.charAt(b.length-2)?a.selectionStart=d+b.length-
1:a.selectionStart=d===f?f+b.length:f+b.length+e.length;a.selectionEnd=a.selectionStart;a.scrollTop=c}else a.value+=b+e;a.focus()}}}();